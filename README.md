# firejail-tor

# üõ°Ô∏è –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è Tor Browser —á–µ—Ä–µ–∑ Firejail –Ω–∞ Fedora / Linux  
**–ê–≤—Ç–æ—Ä:** apchhi  
**–¶–µ–ª—å:** –±–µ–∑–æ–ø–∞—Å–Ω—ã–π, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π, —á–∏—Å—Ç—ã–π –∑–∞–ø—É—Å–∫ Tor Browser –≤ Firejail –±–µ–∑ torbrowser‚Äëlauncher  
**–°—Ç–∞—Ç—É—Å:** —Ä–∞–±–æ—á–∞—è, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Tor Browser –≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π Firejail‚Äë–ø–µ—Å–æ—á–Ω–∏—Ü–µ:

- —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–Ω—ã–º `$HOME`  
- –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Ñ–∞–π–ª–∞–º  
- –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ LAN  
- –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã—Ö–æ–¥–∞ –≤ clearnet  
- —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—Ä–æ—Ñ–∏–ª–µ–º Tor Browser  
- –±–µ–∑ torbrowser‚Äëlauncher (–∫–æ—Ç–æ—Ä—ã–π –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º —Å Firejail private‚Äë–∏–∑–æ–ª—è—Ü–∏–µ–π)

–ú–µ—Ç–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ Fedora Linux –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤.

---

# üß© 1. –£–¥–∞–ª–µ–Ω–∏–µ torbrowser‚Äëlauncher

Tor Browser Launcher –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AppImage –∏ –ª–æ–º–∞–µ—Ç Firejail‚Äë–∏–∑–æ–ª—è—Ü–∏—é. –ï–≥–æ –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å:

```bash
sudo dnf remove torbrowser-launcher
```

---

# üß© 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tor Browser –≤—Ä—É—á–Ω—É—é

–°–∫–∞—á–∏–≤–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∞—Ä—Ö–∏–≤:

```bash
cd ~/Downloads
wget https://www.torproject.org/dist/torbrowser/13.0.9/tor-browser-linux-x86_64-13.0.9.tar.xz
```

–†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º:

```bash
tar -xf tor-browser-linux-*.tar.xz
mv tor-browser ~/tor-browser
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±–∏–Ω–∞—Ä–Ω–∏–∫ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:

```bash
ls ~/tor-browser/Browser/start-tor-browser
```

---

# üß© 3. –°–æ–∑–¥–∞–Ω–∏–µ Firejail‚Äë–ø—Ä–æ—Ñ–∏–ª—è

–°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Ñ–∏–ª—å:

```bash
sudo nano /etc/firejail/tor-browser.profile
```

–í—Å—Ç–∞–≤–ª—è–µ–º:

```bash
# Tor Browser Firejail profile

# –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º private-home ‚Äî Tor Browser –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–∏–º
private-tmp
private-cache

# –ó–∞–ø—Ä–µ—Ç LAN
netfilter

# –ó–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Ñ–∞–π–ª–∞–º
blacklist ~/.ssh
blacklist ~/Documents
blacklist ~/Downloads
blacklist ~/.local/share/containers
blacklist ~/.local/share/podman
blacklist ~/.local/share/docker

# –†–∞–∑—Ä–µ—à–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –∫–∞—Ç–∞–ª–æ–≥—É Tor Browser
whitelist ~/tor-browser
```

–°–æ—Ö—Ä–∞–Ω—è–µ–º.

---

# üß© 4. –°–æ–∑–¥–∞–Ω–∏–µ –ª–∞—É–Ω—á–µ—Ä–∞ tor-browser

–°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª:

```bash
sudo nano /usr/local/bin/tor-browser
```

–í—Å—Ç–∞–≤–ª—è–µ–º:

```bash
#!/bin/bash
cd ~/tor-browser/Browser
exec firejail --profile=/etc/firejail/tor-browser.profile ./start-tor-browser --detach
```

–î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
sudo chmod +x /usr/local/bin/tor-browser
chmod +x ~/tor-browser/Browser/start-tor-browser
```

---

# üß© 5. –ó–∞–ø—É—Å–∫ Tor Browser

```bash
tor-browser
```

---

# üß™ 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–æ–ª—è—Ü–∏–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ Tor Browser –∑–∞–ø—É—â–µ–Ω –≤ Firejail

```bash
firejail --list
```

–û–∂–∏–¥–∞–µ–º:

```
PID:user::firejail --profile=/etc/firejail/tor-browser.profile ...
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ `$HOME` –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω

–ë–µ—Ä—ë–º PID –∏ –≤—ã–ø–æ–ª–Ω—è–µ–º:

```bash
firejail --join=<PID> -- /usr/bin/env | grep HOME
```

–û–∂–∏–¥–∞–µ–º:

```
HOME=/home/user
```

–ù–æ –≤–Ω—É—Ç—Ä–∏ –ø–µ—Å–æ—á–Ω–∏—Ü—ã `$HOME` ‚Äî **–ø—É—Å—Ç–æ–π**, –±–µ–∑ —Ç–≤–æ–∏—Ö —Ñ–∞–π–ª–æ–≤.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Ñ–∞–π–ª–∞–º

```bash
firejail --join=<PID> -- ls ~/Documents
```

–û–∂–∏–¥–∞–µ–º:

```
No such file or directory
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ LAN –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

```bash
firejail --join=<PID> -- ping -c1 192.168.0.1
```

–û–∂–∏–¥–∞–µ–º:

```
100% packet loss
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ Tor —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–í–Ω—É—Ç—Ä–∏ Tor Browser:

- https://check.torproject.org  
- https://ipleak.net  
- https://browserleaks.com/webrtc  

–û–∂–∏–¥–∞–µ–º:

- IP = Tor exit node  
- DNS = Tor  
- WebRTC = disabled  
- LAN = –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω  

---

# üõ°Ô∏è 7. –ß—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —ç—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ‚úî –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è Tor Browser  
### ‚úî –û—Ç–¥–µ–ª—å–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω—ã–π `$HOME`  
### ‚úî –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–∞–º  
### ‚úî –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ LAN  
### ‚úî –ù–µ—Ç –≤—ã—Ö–æ–¥–∞ –≤ clearnet  
### ‚úî –ß–∏—Å—Ç—ã–π –ø—Ä–æ—Ñ–∏–ª—å Tor Browser  
### ‚úî –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ –ø–µ—Å–æ—á–Ω–∏—Ü—ã  
### ‚úî –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Fedora –∏ –¥—Ä—É–≥–∏–º–∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞–º–∏  

–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ **–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ IP  
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ DNS  
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç WebRTC‚Äë—É—Ç–µ—á–∫–∏  
- –∏—Å–∫–ª—é—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø Tor Browser –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –¥–∞–Ω–Ω—ã–º  
- –∏—Å–∫–ª—é—á–∞–µ—Ç –æ–±—Ö–æ–¥ Tor  
- –∏—Å–∫–ª—é—á–∞–µ—Ç fingerprinting —á–µ—Ä–µ–∑ LAN  
- –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏  

---

# üß© 8. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å:

- –∑–∞–ø—Ä–µ—Ç WebGL  
- –∑–∞–ø—Ä–µ—Ç –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤  
- –∑–∞–ø—Ä–µ—Ç D-Bus  
- –∑–∞–ø—Ä–µ—Ç IPC  
- seccomp‚Äë—Ñ–∏–ª—å—Ç—Ä—ã  
- read‚Äëonly —Ä–µ–∂–∏–º –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ Tor Browser  
